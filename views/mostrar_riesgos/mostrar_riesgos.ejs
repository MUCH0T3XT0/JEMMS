<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riesgos existentes del Proyecto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <%- include('mostrar_riesgos.style.ejs') %>
  <%- include('./../barra_principal.ejs')%>

  <div class="row g-0 text-center">
      <div class="col-sm-6 col-md-7">
        <br>
        <h3>Riesgos existentes del proyecto</h3><br>
        <div class="container text-center">
          <div class="row align-items-center">
            <div class="col">
              <div class="circular_progress" style="--clr: #4e80d7; --value:<%= Math.round(parseInt(tiempo[0].suma) /  total * 100)%> ">
                <span><%= Math.round(parseInt(tiempo[0].suma) /  total * 100)%>%</span>
                <span class="progress_label">Tiempo</span>
              </div>
            </div>
            <div class="col">
              <div class="circular_progress" style="--clr: #4ef73c; --value: <%= Math.round(parseInt(costo[0].suma) / total * 100)%>">
                <span><%= Math.round(parseInt(costo[0].suma) / total * 100)%>%</span>
                <span class="progress_label">Costo</span>
              </div>
            </div>
            <div class="col">
              <div class="circular_progress" style="--clr: orange; --value: <%= Math.round(parseInt(calidad[0].suma) / total * 100)%>">
                <span><%= Math.round(parseInt(calidad[0].suma) / total * 100)%>%</span>
                <span class="progress_label">Calidad</span>
              </div>
            </div>
          </div>
        </div>
        <div class="container text-center">
          <div class="row justify-content-center">
            <div class="col">
              <div class="circular_progress" style="--clr: #ffdd1f; --value: <%= Math.round(parseInt(recursos[0].suma) / total * 100)%>">
                <span><%= Math.round(parseInt(recursos[0].suma) / total * 100)%>%</span>
                <span class="progress_label">Recursos</span>
              </div>
            </div>
            <div class="col">
              <div class="circular_progress" style="--clr: #4ed0d7; --value: <%= Math.round(parseInt(alcance[0].suma) / total * 100)%>">
                <span><%= Math.round(parseInt(alcance[0].suma) / total * 100)%>%</span>
                <span class="progress_label">Alcance</span>
              </div>
            </div>
          </div>
        </div>
      </div>
        <div class="col-6 col-md-4">
          <div class="row align-items-center">
            <div class="col">
              <p id="promedio">Medio</p>
              <h2>Nivel de Riesgo</h2>
              <!--div id="nivelRiesgo" class="form-text"></div-->
            </div>           
          </div>
        </div>
          <div class="container">
            <div class="table-responsive">
                <table class="table align-middle">
                    <thead>
                        <tr>
                            <th scope="col">Descripcion</th>
                            <th scope="col">Categoria</th>
                            <th scope="col">Impacto</th>
                            <th scope="col">Probabilidad</th>
                            <th scope="col">Estrategia</th>
                            <th scope="col">Editar</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% for (var i = 0; i< riesgo.length ; i++){ %>
                        <tr>
                            <td><p name="descripcion" ><%= riesgo[i].description %></p></td>
                    
                           

                            <%if (riesgo[i].categoria == 1){%>
                                <td><p style="color: #4ed0d7;">Alcance</p></td>
                            <%}else if (riesgo[i].categoria == 2){%>
                                <td><p style="color: #4e80d7;">Tiempo</p></td>
                            <%}else if (riesgo[i].categoria == 3){%>
                                <td><p style="color: orange;">Calidad</p></td>
                            <%}else if (riesgo[i].categoria == 4){%>
                                <td><p style="color: #4ef73c;">Costo</p></td>
                            <%}else if (riesgo[i].categoria == 5){%>
                                <td><p style="color: #ffdd1f;">Recursos</p></td>
                            <%}%>
                            <td><p><%= riesgo[i].impacto %></p></td>
                            <td><p><%= riesgo[i].probabilidad %></p></td>
                            <td><p><%= riesgo[i].estrategia_m %><p></td>
                            <td><a href="/proyecto/<%= id_proyecto %>/<%= riesgo[i].id_riesgo %>/editar_riesgo" type="submit" class="btn btn-primary mb-3">Editar riesgo</a></td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
          </div>

          <div class="container" id="tablaMostar_riesgos"  value="<%= id_proyecto%>"></div>            
  </div>
</body>
<%- include('mostrar_riesgos.js.ejs')%>
<script src="/usuario/mostrar_riesgos.js"></script>
</html>